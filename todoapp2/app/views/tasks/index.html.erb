<div class="tasks-page">
  <header class="tasks-header">
    <h1>iTasks</h1>
    <div class="header-actions">
      <%= link_to 'New task', new_task_path, class: "action-button new-task-btn" %>
      <%= button_to "Log out", destroy_user_session_path, 
                   method: :delete, 
                   class: "action-button log-out-btn",
                   form: { data: { turbo_confirm: 'Are you sure you want to log out?' } } %>
    </div>
  </header>

  <% if notice %>
    <div class="notice"><%= notice %></div>
  <% end %>

  <div class="tasks-container">
    <div class="tasks-column">
      <h2 class="tasks-status">To-Do</h2>
      <ul class="tasks-list">
        <% @tasks.todo.each do |task| %>
          <li class="tasks-item">
            <%= render 'task', task: task %>
            <div class="task-actions">
              <%= link_to "Edit", edit_task_path(task), class: 'action-button edit-btn' %>
              <%= button_to "Delete", task_path(task),
                          method: :delete,
                          form: { 
                            class: 'delete-form',
                            data: { turbo_confirm: 'Are you sure you want to delete this task?' } 
                          },
                          class: 'action-button delete-btn' %>
            </div>
          </li>
        <% end %>
      </ul>
    </div>

    <div class="tasks-column">
      <h2 class="tasks-status">Completed</h2>
      <ul class="tasks-list">
        <% @tasks.completed.each do |task| %>
          <li class="tasks-item completed">
            <%= render 'task', task: task %>
            <%= button_to "Delete", task_path(task),
                        method: :delete,
                        form: { 
                          class: 'delete-form',
                          data: { turbo_confirm: 'Are you sure you want to delete this task?' } 
                        },
                        class: 'action-button delete-btn' %>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>